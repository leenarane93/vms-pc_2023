<div class="container">

    <div class="row">
        <div class="col-md-12" style="padding: 25px;">
            <button class="btn btn-primary" (click)="BackToList()">
                <!-- <span class="spinner-border spinner-border-sm me-1" ></span> -->
                <i class="icon-arrow-left"></i>
                Back To List
            </button>
        </div>
    </div>
    <div id="stepper1" class="bs-stepper card">
        <div class="bs-stepper-header">
            <div class="step" data-target="#test-l-1">
                <button class="step-trigger">
                    <span class="bs-stepper-circle">1</span>
                    <span class="bs-stepper-label">Playlist Info.</span>
                </button>
            </div>
            <div class="step" data-target="#test-l-2">
                <button class="step-trigger">
                    <span class="bs-stepper-circle">2</span>
                    <span class="bs-stepper-label">Block Configuration</span>
                </button>
            </div>
            <div class="step" data-target="#test-l-3">
                <button class="step-trigger">
                    <span class="bs-stepper-circle">3</span>
                    <span class="bs-stepper-label">Media Selection</span>
                </button>
            </div>
            <div class="step" data-target="#test-l-3">
                <button class="step-trigger">
                    <span class="bs-stepper-circle">4</span>
                    <span class="bs-stepper-label">Media Management</span>
                </button>
            </div>
            <div class="step" data-target="#test-l-3">
                <button class="step-trigger">
                    <span class="bs-stepper-circle">5</span>
                    <span class="bs-stepper-label">Finish</span>
                </button>
            </div>
        </div>
        <div class="bs-stepper-content">
            <form (ngSubmit)="onSubmit()" autocomplete="off" [formGroup]="form">
                <div id="test-l-1" class="content">
                    <div class="row">
                        <div class="col-md-3">
                            <label class="form-label">Playlist Name*</label>
                            <input type="text" formControlName="playlistName" class="form-control"
                                placeholder="Playlist Name"
                                [ngClass]="{ 'is-invalid': f['playlistName'].touched && f['playlistName'].errors, 'is-valid': f['playlistName'].valid }" />
                            <div *ngIf="f['playlistName'].touched && f['playlistName'].errors" class="invalid-feedback">
                                <div>{{getErrorMessage('playlistName','Playlist Name',true,"Invalid data available in Playlist Name")}}</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">Height*</label>
                            <input type="number" formControlName="height" class="form-control" maxlength="4"
                                placeholder="Height"
                                [ngClass]="{ 'is-invalid': f['height'].touched && f['height'].errors, 'is-valid': f['height'].valid }" />
                            <div *ngIf="f['height'].touched && f['height'].errors" class="invalid-feedback">
                                <div>{{getErrorMessage('height','Height',true,"Invalid data available in Height")}}
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">Width*</label>
                            <input type="number" formControlName="width" class="form-control" placeholder="Width"
                                [ngClass]="{ 'is-invalid': f['width'].touched && f['width'].errors, 'is-valid': f['width'].valid }" />
                            <div *ngIf="f['width'].touched && f['width'].errors" class="invalid-feedback">
                                <div>{{getErrorMessage('width','Width',true,"Invalid data available in Width")}}</div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <button type="button" [disabled]="!form.valid" class="btn btn-primary float-right" (click)="StepNext(0)">Next</button>
                        </div>
                    </div>
                </div>

                <div id="test-l-2" class="content mb-1">
                    <div
                            class="row formrow align-items-center"
                            style="width: 1200px"
                          >
                            <div
                              style="overflow: auto"
                              class="col-lg-6 text-lg-right text-right buttonsdiv my-4 my-lg-0"
                            >
                              <div
                                *ngIf="isView || isCopy"
                                class="container-resize drag-boundary"
                                [style.height.px]="heighttxt"
                                [style.width.px]="widthtxt"
                                [ngClass]="{
                                  'top-b': !edge?.top,
                                  'bottom-b': !edge?.bottom,
                                  'left-b': !edge?.left,
                                  'right-b': !edge?.right,
                                  disableDiv: isView || isCopy
                                }"
                                #myBounds
                              >
                                <div
                                  *ngFor="let node of nodeDetails"
                                  ngResizable
                                  ngDraggable
                                  (movingOffset)="onMoving($event, node.id)"
                                  [preventDefaultEvent]="true"
                                  (rzResizing)="onResizing($event, node.id)"
                                  class="resizable-widget"
                                  style="
                                    border-style: solid;
                                    transform: none !important;
                                    position: absolute !important;
                                  "
                                  [rzMinWidth]="50"
                                  [rzMaxWidth]="node.maxWidth - node.left"
                                  [rzMinHeight]="50"
                                  [rzMaxHeight]="node.maxheight - node.top"
                                  [style.height.px]="node.height"
                                  [style.width.px]="node.width"
                                  [style.left.px]="node.left"
                                  [style.top.px]="node.top"
                                  [bounds]="myBounds"
                                  [inBounds]="inBounds"
                                >
                                  <h4 class="widget-header">{{ node.id }}</h4>
                                </div>
                              </div>

                              <div
                                *ngIf="!isView && !isCopy"
                                class="container-resize drag-boundary"
                                [style.height.px]="heighttxt"
                                [style.width.px]="widthtxt"
                                [ngClass]="{
                                  'top-b': !edge?.top,
                                  'bottom-b': !edge?.bottom,
                                  'left-b': !edge?.left,
                                  'right-b': !edge?.right,
                                  disableDiv: isView
                                }"
                                #myBounds
                              >
                                <div
                                  *ngFor="let node of nodeDetails"
                                  ngResizable
                                  ngDraggable
                                  (movingOffset)="onMoving($event, node.id)"
                                  [preventDefaultEvent]="true"
                                  (rzResizing)="onResizing($event, node.id)"
                                  class="resizable-widget"
                                  style="
                                    border-style: solid;
                                    top: 0;
                                    left: 0;
                                    position: absolute;
                                  "
                                  [rzMinWidth]="50"
                                  [rzMaxWidth]="node.maxWidth - node.left"
                                  [rzMinHeight]="50"
                                  [rzMaxHeight]="node.maxheight - node.top"
                                  [style.height.px]="node.height"
                                  [style.width.px]="node.width"
                                  [bounds]="myBounds"
                                  [inBounds]="inBounds"
                                >
                                  <h4 class="widget-header">{{ node.id }}</h4>
                                </div>
                              </div>
                              <br />
                            </div>
                            <div
                              class="col-lg-6 text-lg-right text-right buttonsdiv my-4 my-lg-0"
                            >
                              <div style="height: 400px; overflow: auto">
                                <span></span>
                                <table style="width: 100%" class="table">
                                  <thead class="thead-dark">
                                    <tr style="height: 20px">
                                      <th>Block No</th>
                                      <th>Height</th>
                                      <th>Width</th>
                                      <th>Left</th>
                                      <th>Top</th>
                                      <!-- <th>Select</th> -->
                                    </tr>
                                  </thead>
                                  <tbody>
                                    <tr
                                      *ngFor="let node of nodeDetails"
                                      style="height: 20px"
                                    >
                                      <td>
                                        {{ node.id }}
                                      </td>
                                      <td>
                                        {{ node.height }}
                                      </td>
                                      <td>
                                        {{ node.width }}
                                      </td>
                                      <td>
                                        {{ node.left }}
                                      </td>
                                      <td>
                                        {{ node.top }}
                                      </td>
                                      <!-- <td>
                                        <button
                                          [disabled]="isView"
                                          type="button"
                                          mat-raised-button
                                          color="primary"
                                          (click)="EditBlock(node.id)"
                                          matTooltip="Edit Block"
                                        >
                                          Edit
                                        </button>
                                      </td> -->
                                    </tr>
                                  </tbody>
                                </table>
                              </div>
                            </div>
                          </div>
                          <div class="row formrow align-items-center">
                            <div
                              class="col-lg-4 text-lg-left text-left buttonsdiv my-4 my-lg-0"
                            >
                              <!-- <button
                                type="button"
                                mat-raised-button
                                mat-tool-tip="Save Block"
                                color="primary"
                                (click)="SaveBlock()"
                              >
                                Save Block</button
                              >&nbsp;&nbsp;&nbsp;&nbsp; -->
                              <button
                                type="button"
                                mat-raised-button
                                color="warn"
                                [disabled]="isCollide"
                                matTooltip="Add New Block in VMS"
                                (click)="addNewBlock()"
                              >
                                Add New Block</button
                              >&nbsp;&nbsp;&nbsp;&nbsp;
                              <button
                                type="button"
                                mat-raised-button
                                [disabled]="
                                  nodeDetails.length == 1
                                "
                                color="accent"
                                matTooltip="Remove Last Block"
                                (click)="UndoBlock()"
                              >
                                Undo</button
                              >&nbsp;&nbsp;&nbsp;&nbsp;
                            </div>
                            <div
                              class="col-lg-8 text-lg-right text-right buttonsdiv my-4 my-lg-0"
                            >
                              <button
                                type="button"
                                color="warn"
                                (click)="ResetForm(2)"
                              >
                                Reset</button
                              >&nbsp;&nbsp;&nbsp;&nbsp;
                              <button
                                type="submit"
                                color="primary"
                                [disabled]="isCollide"
                                (click)="next()"
                              >
                                Next
                              </button>
                            </div>
                          </div>
                  </div>
                <div id="test-l-3" class="content text-center">
                    <button type="submit" class="btn btn-primary mt-5">Submit</button>
                </div>
            </form>
        </div>
    </div>

</div>